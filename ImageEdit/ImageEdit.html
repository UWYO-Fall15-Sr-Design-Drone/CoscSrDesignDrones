<!DOCTYPE html>
<html>
	<head>
		<!--<link rel="stylesheet" type="text/css" href="theme.css">-->
		<meta charset="UTF-8">
	<head>
	<div id="puzzle">
	<script type="text/javascript">
	//Global variables needed for the stage/canvas
	var _canvas;
	var _stage;

	//Global variables needed for data/images 
	var _fileName = "dir_content.txt";
	var _photos = new Array();

	//Shit
	var _image1;

	/**
	*	The initializing funtion called when the page is loaded.
	*/
	function main(){
		//Parse text with our images in it
		readTextFile();
		//Creates the canvasObjects
		//initialiseImages();
	

	}

	/**
	*	HTML5 needs the images created before establishing
	*	the stage/canvas. NOTE loadImage is called from inside
	*	the eventListener. 
	*/
	function initialiseImages(){
		

		_image1 = new Image();
		_image1.addEventListener('load', loadImage,false);
		_image1.src = "Images/Photo_1.jpg";
	}

	/**
	*	Reads in our _fileName and saves the content into a string[] called
	*	"_fileContent".  
	*/
	function readTextFile(){			
		
	//TODO Code here that would read our textfile line by line into our array
	//Hard coded until the server is up. 

	 var _contents = ["Photo_1.jpg",
				"Photo_2.jpg",
				"Photo_3.jpg",
				"Photo_4.jpg",
				"Photo_5.jpg",
				"Photo_6.jpg"];

	createPhotoVariables(_contents);	
	}

	function createPhotoVariables(_contents){
		numOfPhotos = _contents.length;
	
		for (var i = 0; i <= (numOfPhotos -1); ++i){
			_photos[i] = new Image();
			_photos[i].addEventListener('load', loadImage,false);
			_photos[i].src = "Images/"+_contents[i];
	
	}

	}

	/**
	*	Uses the info from the called image.
	*	Uses this to caculate the piece/board size. 
	*/
	function loadImage(image){

		loadCanvas();
		initializeCanvas();
	}

	/**
	*	Set the cavas size and stage size. 
	*/
	function loadCanvas(){
		_canvas = document.getElementById('canvas');		
		_stage	= _canvas.getContext('2d');
		_canvas.width  = 5000;
		_canvas.height = 5000;

		_canvas.style.border = "1px solid black, -400, -400";
	}


	function initializeCanvas(){


		//Add the images to the canvas
		loadImages()
	}


	function loadImages(){
		var x = 0;
		var y = 0;

		for (var i = 0; i <= _photos.length -1; ++i){
			_stage.drawImage(_photos[i],x,y)
			x = x + 200;
			y = y + 200;
		}
	}



	</script>
	</div>
	<body onload="main();">
		<canvas id="canvas"></canvas>
		<br>
		<p></p>
	</body>
</html>
